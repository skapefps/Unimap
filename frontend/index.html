<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UNIMAP - Dashboard</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="shortcut icon" type="imagex/png" href="../frontend/images/logo-unipam 2.png">
    <link rel="shortcut icon" type="imagex/png" href="images/logo-unipam 2.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
   <!-- MOBILE HEADER -->
<header class="mobile-header">
    <div class="header-top">
        <button class="menu-hamburger" onclick="toggleMenu()">☰</button>
        <h1>UNIMAP</h1>
        <span class="user-name" id="mobileUserName">Kaique Lucas</span>
    </div>

    <!-- MENU HAMBURGER -->
    <nav class="mobile-nav" id="mobileNav">
        <div class="nav-user" id="mobileNavUser">Kaique Lucas</div>
        <a href="#" onclick="showSection('aulas-mobile')">Aulas</a>
        <a href="#" onclick="showSection('professores')">Professores</a>
        <a href="#" onclick="showSection('mapa-blocos')">Mapa</a>
        
        <!-- ✅ DASHBOARD APENAS PARA ADMIN (MOBILE) -->
        <a href="admin.html" class="admin-only" id="admin-dashboard-mobile" style="display: none;">
            <i class="fas fa-cog"></i> Dashboard
        </a>
        
        <a href="#" onclick="logout()">Sair</a>
    </nav>
</header>

<!-- DESKTOP HEADER -->
<header class="desktop-header">
    <div class="header-content">
        <a href="index.html" class="logo-link">
            <img src="images/unipam png.png" alt="UNIPAM" class="navbar-logo">
            <h1>UNIMAP</h1>
        </a>
        <nav class="desktop-nav">
            <a href="index.html" onclick="showSection('aulas')" class="nav-link">Minhas Aulas</a>
            <a href="#" onclick="showSection('mapa-blocos')" class="nav-link">Mapa Salas</a>
            <a href="#" onclick="showSection('professores')" class="nav-link">Professores</a>
            
            <!-- ✅ DASHBOARD APENAS PARA ADMIN (DESKTOP) -->
            <a href="admin.html" class="nav-link admin-only" id="admin-dashboard-link" style="display: none;">
                <i class="fas fa-cog"></i> Dashboard
            </a>
            
            <span class="user-info" id="desktopUserName">Kaique Lucas</span>
         <!-- BOTÃO SAIR -->
        <button class="btn-sair-desktop-texto" onclick="logout()">
            <i class="fas fa-sign-out-alt"></i> Sair
        </button>
        </nav>
    </div>
</header>

    <main>
        <!-- SEÇÃO MINHAS AULAS (MOBILE) -->
<section id="aulas-mobile" class="section mobile-section active">
    <div class="section-header">
        <h2><i class="fas fa-book"></i> Minhas Aulas</h2>
        <span class="semestre-tag">2024.1</span>
    </div>
    
    <div class="aulas-filters">
        <select class="filter-select" onchange="filtrarAulas(this.value)">
            <option value="todas">Todas as aulas</option>
            <option value="hoje">Aulas de hoje</option>
            <option value="semana">Esta semana</option>
        </select>
    </div>

    <div class="aulas-list">
        <!-- As aulas serão carregadas dinamicamente -->
    </div>
    
    <!-- BOTÃO APENAS PARA PROFESSORES/ADMIN - inicialmente escondido -->
    <button class="btn-criar-aula" id="btnCriarAulaMobile" style="display: none;" onclick="showSection('criar-aula-mobile')">
        <i class="fas fa-plus-circle"></i> Criar Nova Aula
    </button>
</section>

<!-- SEÇÃO MINHAS AULAS (DESKTOP) -->
<section id="aulas-desktop" class="section desktop-section active">
    <div class="section-header">
        <h2><i class="fas fa-book"></i> Minhas Aulas - 2024.1</h2>
        <div class="header-actions">
            <select class="filter-select" onchange="filtrarAulasDesktop(this.value)">
                <option value="todas">Todas as aulas</option>
                <option value="hoje">Hoje</option>
                <option value="semana">Esta semana</option>
                <option value="proximas">Próximas</option>
            </select>
            <!-- BOTÃO APENAS PARA PROFESSORES/ADMIN - inicialmente escondido -->
            <button class="btn-primary" id="btnCriarAulaDesktop" style="display: none;" onclick="showSection('criar-aula-mobile')">
                <i class="fas fa-plus-circle"></i> Nova Aula
            </button>
        </div>
    </div>

    <div class="aulas-grid">
        <!-- As aulas serão carregadas dinamicamente -->
    </div>
</section>

        <!-- SEÇÃO MAPA DE BLOCOS (ALUNO) -->
<section id="mapa-blocos" class="section">
    <div class="section-header">
        <h2><i class="fas fa-map-marked-alt"></i> Mapa</h2>
        <p>Encontre salas, laboratórios e auditórios</p>
    </div>

    <!-- Blocos - AGORA DINÂMICO -->
    <div class="blocos-grid" id="blocos-grid-aluno">
        <div class="empty-state">
            <i class="fas fa-spinner fa-spin fa-3x"></i>
            <p>Carregando blocos...</p>
        </div>
    </div>
</section>

<!-- SEÇÃO ANDARES (ALUNO) -->
<section id="mapa-andares" class="section" style="display: none;">
    <div class="section-header">
        <button class="btn-voltar" onclick="voltarParaBlocosAluno()">
            <i class="fas fa-arrow-left"></i> Voltar
        </button>
        <h2 id="bloco-title-aluno">Bloco </h2>
        <p>Selecione o andar</p>
    </div>

    <div class="andares-grid" id="andares-grid-aluno">
        <!-- Andares carregados dinamicamente -->
    </div>
</section>

<!-- SEÇÃO SALAS (ALUNO) -->
<section id="mapa-salas" class="section" style="display: none;">
    <div class="section-header">
        <button class="btn-voltar" onclick="voltarParaAndaresAluno()">
            <i class="fas fa-arrow-left"></i> Voltar
        </button>
        <h2 id="sala-title">Bloco A > 1° Andar</h2>
        <p class="salas-counter">0 salas</p>
    </div>

    <!-- Filtros -->
    <div class="salas-filters" id="salas-filters" style="display: none;">
        <div class="filter-group">
            <input type="text" id="searchSalaAluno" placeholder="Pesquisar sala..." class="search-input">
            <i class="fas fa-search"></i>
        </div>
        <div class="filter-group">
            <select id="filterTipoSalaAluno" class="filter-select">
                <option value="">Todos os tipos</option>
                <option value="Sala de Aula">Sala de Aula</option>
                <option value="Laboratório">Laboratório</option>
                <option value="Auditório">Auditório</option>
                <option value="Sala de Reunião">Sala de Reunião</option>
            </select>
        </div>
    </div>

    <div class="salas-grid" id="salas-grid-aluno">
        <!-- Salas carregadas dinamicamente -->
    </div>
</section>

        <!-- SEÇÃO PROFESSORES -->
        <section id="professores" class="section">
            <h2>Professores</h2>
            <div class="professores-tabs">
                <button class="tab-btn active" onclick="openTab('meus-professores')">Meus Professores</button>
                <button class="tab-btn" onclick="openTab('adicionar-professor')">Adicionar Professor</button>
            </div>

            <div id="meus-professores" class="tab-content active">
                <div class="professores-list">
                    <div class="professor-card">
                        <p><strong>Professor:</strong> João Silva</p>
                        <p><strong>Periodo:</strong> 3°</p>
                        <p><strong>Curso:</strong> Sistemas de Informação</p>
                    </div>
                    <div class="professor-card">
                        <p><strong>Professor:</strong> Maria Santos</p>
                        <p><strong>Periodo:</strong> 2°</p>
                        <p><strong>Curso:</strong> Sistemas de Informação</p>
                    </div>
                </div>
            </div>

            <!-- NA SEÇÃO ADICIONAR PROFESSOR -->
<div id="adicionar-professor" class="tab-content">
    <form class="add-professor-form">
        <!-- CURSO COM ÍCONE -->
        <div class="form-group select-with-icon">
            <label><i class="fas fa-graduation-cap"></i> Curso:</label>
            <select class="select-shadow">
                <option value="">Selecione seu curso</option>
                <option value="si">Sistemas de Informação</option>
                <option value="adm">Administração</option>
                <option value="dir">Direito</option>
            </select>
        </div>

        <!-- PERÍODO COM ÍCONE -->
        <div class="form-group select-with-icon">
            <label><i class="fas fa-calendar-alt"></i> Período:</label>
            <select class="select-shadow">
                <option value="">Selecione o período</option>
                <option value="1">1° Período</option>
                <option value="2">2° Período</option>
                <option value="3">3° Período</option>
                <option value="4">4° Período</option>
            </select>
        </div>

        <!-- PROFESSOR COM ÍCONE -->
        <div class="form-group select-with-icon">
            <label><i class="fas fa-chalkboard-teacher"></i> Professor:</label>
            <select id="professor-select" class="select-shadow">
                <option value="">Selecione o professor</option>
                <!-- JavaScript vai popular aqui -->
            </select>
        </div>

        <button type="submit" class="btn-primary">
            <i class="fas fa-plus-circle"></i> Adicionar Professor
        </button>
    </form>
</div>

        <!-- SEÇÃO CRIAR AULA (MOBILE) -->
        <section id="criar-aula-mobile" class="section mobile-section" style="display: none;">
            <h2>Criar Aula</h2>
            <form class="criar-aula-form">
                <div class="form-group">
                    <label>Curso:</label>
                    <select>
                        <option>Selecione o curso</option>
                        <option>Sistemas de Informação</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Período:</label>
                    <select>
                        <option>Selecione o período</option>
                        <option>3° Periodo</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Turma:</label>
                    <select>
                        <option>Selecione a turma</option>
                        <option>SI3N</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Sala:</label>
                    <select>
                        <option>Selecione a sala</option>
                        <option>Sala 101</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Horario:</label>
                    <select>
                        <option>Selecione o horário</option>
                        <option>08:00-10:00</option>
                    </select>
                </div>
                <button type="submit" class="btn-primary">Criar</button>
            </form>
            <button class="btn-voltar" onclick="showSection('aulas-mobile')">← Voltar</button>
        </section>
    </main>
    
    <script src="js/auth.js"></script>
    <script src="js/api.js"></script>
    <script src="js/app.js"></script>
    <script src="js/aulas.js"></script>
    <script src="js/professores.js"></script>
    <script src="js/mapa.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Verificar se usuário está logado
        if (authManager.isUserAuthenticated()) {
            console.log('👋 Usuário logado:', authManager.getCurrentUser().nome);
            // Aqui podemos adaptar o menu depois
        } else {
            console.log('👋 Visitante não logado');
        }
    });
    document.addEventListener('DOMContentLoaded', function() {
    const user = authManager ? authManager.getCurrentUser() : null;
    
    if (user && user.tipo === 'professor') {
        console.log('🎯 Professor detectado na página de aluno. Redirecionando...');
        setTimeout(() => {
            window.location.href = 'professor-dashboard.html';
        }, 1000);
    }
});
    
</script>
</body>
</html>